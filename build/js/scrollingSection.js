!function(e){e.fn.scrollToSection=function(t){t=e.extend({scrollSpeed:700,headerSize:0,buttons:!1,navigation:!1,sectionSelector:"section"},t);var o,n=!0,i=e("html").height(),l=this.attr("id"),c=e("#"+l).children().filter(t.sectionSelector),s=0,r=new Object;r.button="<div class='scrollToSection-Controls'><div class='scrollToSection-Control' data-control='1'></div><div class='scrollToSection-Control' data-control='-1'></div></div>";var a,d=new Object;function u(){e(c[s]).offset()&&(e("html, body").animate({scrollTop:e(c[s]).offset().top-t.headerSize},t.scrollSpeed),e(".screen-nav li").removeClass("active"),e(o[s]).addClass("active"),e(c[s]).hasClass("another__color")?e(".screen-nav").addClass("custom__theme"):e(".screen-nav").removeClass("custom__theme"))}function f(o){c=e("#"+o).children().filter(t.sectionSelector)}d.list=e("<ul class='screen-nav'></ul>"),e("html, body").animate({scrollTop:e(c[s]).offset().top-t.headerSize},t.scrollSpeed),function(){if(!t.buttons)return!1;e("#"+l).append(r.button)}(),function(){if(!t.navigation)return!1;c.each(function(e){d.list.append('<li data-section="'+e+'" ></li>')}),e("#"+l).append(d.list),o=d.list.children().filter("li")}(),f(l),e(window).bind("mousewheel DOMMouseScroll MozMousePixelScroll",function(o){var c=e("html").height();i!=c&&(f(l),i=c),delta=parseInt(o.originalEvent.wheelDelta||-o.originalEvent.detail),n&&(n=!1,setTimeout(function(){n=!0},t.scrollSpeed+100),delta>=0?(s--,u()):(s++,u()))}),e(document).keydown(function(e){if(n){if(n=!1,setTimeout(function(){n=!0},t.scrollSpeed+100),37==e.keyCode||38==e.keyCode)return s--,u(),!1;if(39==e.keyCode||40==e.keyCode)return s++,u(),!1}}),e("#"+l).on("click","[data-section]",function(){console.log(s),n&&(n=!1,setTimeout(function(){n=!0},t.scrollSpeed+100),s=e(this).attr("data-section"),u())}),e("#"+l).on("click",".scrollToSection-Control",function(){if(n)return n=!1,setTimeout(function(){n=!0},t.scrollSpeed+100),e(this).attr("data-control")<0?(s--,u(),!1):(s++,u(),!1)}),e(window).bind("touchmove",function(e){e.preventDefault()}),e(window).bind("touchstart",function(e){a=e.originalEvent.touches[0].clientY}),e(window).bind("touchend",function(e){var o=e.originalEvent.changedTouches[0].clientY;n&&(n=!1,setTimeout(function(){n=!0},t.scrollSpeed+100),a>o+5?(s++,u()):a<o-5&&(s--,u()))})}}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcm9sbGluZ1NlY3Rpb24uanMiXSwibmFtZXMiOlsiJCIsImZuIiwic2Nyb2xsVG9TZWN0aW9uIiwib3B0aW9ucyIsImV4dGVuZCIsInNjcm9sbFNwZWVkIiwiaGVhZGVyU2l6ZSIsImJ1dHRvbnMiLCJuYXZpZ2F0aW9uIiwic2VjdGlvblNlbGVjdG9yIiwibmF2aWdhdGlvbkl0ZW1zIiwiY2FuU2Nyb2xsIiwicGFnZUhlaWdodCIsImhlaWdodCIsIiR0aGlzIiwidGhpcyIsImF0dHIiLCJzY3JvbGxhYmxlU2VjdGlvbnMiLCJjaGlsZHJlbiIsImZpbHRlciIsImFjdGl2ZVNjcmVlbiIsImNvbnRyb2xzIiwiT2JqZWN0IiwiYnV0dG9uIiwidHMiLCJnb1RvU2VjdGlvbiIsIm9mZnNldCIsImFuaW1hdGUiLCJzY3JvbGxUb3AiLCJ0b3AiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwiaGFzQ2xhc3MiLCJnZXRTZWN0aW9uQXJyYXkiLCJsaXN0IiwiYXBwZW5kIiwiYnVpbGRCdXR0b24iLCJlYWNoIiwia2V5IiwiYnVpbGROYXZpZ2F0aW9uIiwid2luZG93IiwiYmluZCIsImV2ZW50IiwiZHluYW1pY0hlaWdodCIsImRlbHRhIiwicGFyc2VJbnQiLCJvcmlnaW5hbEV2ZW50Iiwid2hlZWxEZWx0YSIsImRldGFpbCIsInNldFRpbWVvdXQiLCJkb2N1bWVudCIsImtleWRvd24iLCJlIiwia2V5Q29kZSIsIm9uIiwiY29uc29sZSIsImxvZyIsInByZXZlbnREZWZhdWx0IiwidG91Y2hlcyIsImNsaWVudFkiLCJ0ZSIsImNoYW5nZWRUb3VjaGVzIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiQ0FDQSxTQUFVQSxHQUVOQSxFQUFFQyxHQUFHQyxnQkFBa0IsU0FBU0MsR0FFNUJBLEVBQVVILEVBQUVJLFFBQ1JDLFlBQVksSUFDWkMsV0FBVyxFQUNYQyxTQUFTLEVBQ1RDLFlBQVcsRUFDWEMsZ0JBQWdCLFdBQ2xCTixHQUVGLElBSUlPLEVBSkFDLEdBQVksRUFDWkMs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QyxLQUFLLGFBQWMsU0FBVVcsR0FDbkM1QixFQUFLNEIsRUFBRU4sY0FBY1ksUUFBUSxHQUFHQyxVQUdwQzNELEVBQUV3QyxRQUFRQyxLQUFLLFdBQVksU0FBVVcsR0FDakMsSUFBSVEsRUFBS1IsRUFBRU4sY0FBY2UsZUFBZSxHQUFHRixRQUN4Q2hELElBQ0NBLEdBQVksRUFDWnNDLFdBQVcsV0FDUHRDLEdBQVksR0FDYlIsRUFBUUUsWUFBYyxLQUNyQm1CLEVBQUtvQyxFQUFLLEdBQ1Z4QyxJQUNBSyxLQUNPRCxFQUFLb0MsRUFBSyxJQUNqQnhDLElBQ0FLLFNBbE1wQixDQTBNR3FDIiwiZmlsZSI6InNjcm9sbGluZ1NlY3Rpb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tU0NST0xMSU5HLVBMVUdJTi1CeS1Sb21hbi1TLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG4oZnVuY3Rpb24oJCl7XHJcblxyXG4gICAgJC5mbi5zY3JvbGxUb1NlY3Rpb24gPSBmdW5jdGlvbihvcHRpb25zKXtcclxuXHJcbiAgICAgICAgb3B0aW9ucyA9ICQuZXh0ZW5kKHtcclxuICAgICAgICAgICAgc2Nyb2xsU3BlZWQ6NzAwLFxyXG4gICAgICAgICAgICBoZWFkZXJTaXplOjAsXHJcbiAgICAgICAgICAgIGJ1dHRvbnM6IGZhbHNlLFxyXG4gICAgICAgICAgICBuYXZpZ2F0aW9uOmZhbHNlLFxyXG4gICAgICAgICAgICBzZWN0aW9uU2VsZWN0b3I6J3NlY3Rpb24nXHJcbiAgICAgICAgfSxvcHRpb25zKTtcclxuXHJcbiAgICAgICAgdmFyIGNhblNjcm9sbCA9IHRydWU7XHJcbiAgICAgICAgdmFyIHBhZ2VIZWlnaHQgPSAkKCdodG1sJykuaGVpZ2h0KCk7XHJcbiAgICAgICAgdmFyICR0aGlzID0gdGhpcy5hdHRyKCdpZCcpO1xyXG4gICAgICAgIHZhciBzY3JvbGxhYmxlU2VjdGlvbnMgPSAkKCcjJyskdGhpcykuY2hpbGRyZW4oKS5maWx0ZXIob3B0aW9ucy5zZWN0aW9uU2VsZWN0b3IpO1xyXG4gICAgICAgIHZhciBuYXZpZ2F0aW9uSXRlbXM7XHJcbiAgICAgICAgdmFyIGFjdGl2ZVNjcmVlbiA9IDA7XHJcblxyXG5cclxuICAgICAgICB2YXIgY29udHJvbHMgPSBuZXcgT2JqZWN0KCk7XHJcblxyXG4gICAgICAgIGNvbnRyb2xzLmJ1dHRvbiA9ICAgXCI8ZGl2IGNsYXNzPSdzY3JvbGxUb1NlY3Rpb24tQ29udHJvbHMnPlwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjxkaXYgY2xhc3M9J3Njcm9sbFRvU2VjdGlvbi1Db250cm9sJyBkYXRhLWNvbnRyb2w9JzEnPlwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjwvZGl2PlwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjxkaXYgY2xhc3M9J3Njcm9sbFRvU2VjdGlvbi1Db250cm9sJyBkYXRhLWNvbnRyb2w9Jy0xJz5cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCI8L2Rpdj5cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjwvZGl2PlwiO1xyXG5cclxuICAgICAgICB2YXIgbmF2aWdhdGlvbiA9IG5ldyBPYmplY3QoKTtcclxuXHJcbiAgICAgICAgbmF2aWdhdGlvbi5saXN0ID0gJChcIjx1bCBjbGFzcz0nc2NyZWVuLW5hdic+PC91bD5cIik7XHJcblxyXG4gICAgICAgIGluaXQoKTtcclxuXHJcbiAgICAgICAgZ2V0U2VjdGlvbkFycmF5KCR0aGlzKTtcclxuXHJcblxyXG5cclxuICAgICAgICBmdW5jdGlvbiBpbml0KCl7XHJcbiAgICAgICAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgIHNjcm9sbFRvcDogICQoc2Nyb2xsYWJsZVNlY3Rpb25zW2FjdGl2ZVNjcmVlbl0pLm9mZnNldCgpLnRvcCAtIG9wdGlvbnMuaGVhZGVyU2l6ZVxyXG4gICAgICAgICAgICB9LG9wdGlvbnMuc2Nyb2xsU3BlZWQpO1xyXG5cclxuICAgICAgICAgICAgYnVpbGRlcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ29Ub1NlY3Rpb24oKXtcclxuICAgICAgICAgICAgaWYoJChzY3JvbGxhYmxlU2VjdGlvbnNbYWN0aXZlU2NyZWVuXSkub2Zmc2V0KCkpe1xyXG4gICAgICAgICAgICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvcDokKHNjcm9sbGFibGVTZWN0aW9uc1thY3RpdmVTY3JlZW5dKS5vZmZzZXQoKS50b3AgLSBvcHRpb25zLmhlYWRlclNpemVcclxuICAgICAgICAgICAgICAgIH0sb3B0aW9ucy5zY3JvbGxTcGVlZCk7XHJcbiAgICAgICAgICAgICAgICAkKCcuc2NyZWVuLW5hdiBsaScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICQobmF2aWdhdGlvbkl0ZW1zW2FjdGl2ZVNjcmVlbl0pLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIGlmKCQoc2Nyb2xsYWJsZVNlY3Rpb25zW2FjdGl2ZVNjcmVlbl0pLmhhc0NsYXNzKCdhbm90aGVyX19jb2xvcicpKXtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuc2NyZWVuLW5hdicpLmFkZENsYXNzKCdjdXN0b21fX3RoZW1lJyk7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuc2NyZWVuLW5hdicpLnJlbW92ZUNsYXNzKCdjdXN0b21fX3RoZW1lJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldFNlY3Rpb25BcnJheSgkdGhpcyl7XHJcbiAgICAgICAgICAgIHNjcm9sbGFibGVTZWN0aW9ucyA9ICQoJyMnKyR0aGlzKS5jaGlsZHJlbigpLmZpbHRlcihvcHRpb25zLnNlY3Rpb25TZWxlY3Rvcik7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwic2VjdGlvbiBhcnJheSB1cGRhdGVkXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLU5BVklHQVRJT04gRlVOQ1RJT05TLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBidWlsZGVyKCl7XHJcbiAgICAgICAgICAgIGJ1aWxkQnV0dG9uKCk7XHJcbiAgICAgICAgICAgIGJ1aWxkTmF2aWdhdGlvbigpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIGJ1aWxkQnV0dG9uKCl7XHJcbiAgICAgICAgICAgIGlmKG9wdGlvbnMuYnV0dG9ucyl7XHJcbiAgICAgICAgICAgICAgICAkKCcjJyskdGhpcykuYXBwZW5kKGNvbnRyb2xzLmJ1dHRvbilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZnVuY3Rpb24gYnVpbGROYXZpZ2F0aW9uKCl7XHJcbiAgICAgICAgICAgIGlmKG9wdGlvbnMubmF2aWdhdGlvbil7XHJcbiAgICAgICAgICAgICAgICBzY3JvbGxhYmxlU2VjdGlvbnMuZWFjaChmdW5jdGlvbihrZXkpe1xyXG4gICAgICAgICAgICAgICAgICAgIG5hdmlnYXRpb24ubGlzdC5hcHBlbmQoJzxsaSBkYXRhLXNlY3Rpb249XCInK2tleSsnXCIgPjwvbGk+JylcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgJCgnIycrJHRoaXMpLmFwcGVuZChuYXZpZ2F0aW9uLmxpc3QpO1xyXG4gICAgICAgICAgICAgICAgbmF2aWdhdGlvbkl0ZW1zID0gbmF2aWdhdGlvbi5saXN0LmNoaWxkcmVuKCkuZmlsdGVyKFwibGlcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tTU9VU0UtQklORC1FVkVOVFMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAgICAgJCh3aW5kb3cpLmJpbmQoJ21vdXNld2hlZWwgRE9NTW91c2VTY3JvbGwgTW96TW91c2VQaXhlbFNjcm9sbCcsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgZHluYW1pY0hlaWdodCA9ICQoJ2h0bWwnKS5oZWlnaHQoKTtcclxuICAgICAgICAgICAgaWYocGFnZUhlaWdodCAhPSBkeW5hbWljSGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICBnZXRTZWN0aW9uQXJyYXkoJHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgcGFnZUhlaWdodCA9IGR5bmFtaWNIZWlnaHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZGVsdGEgPSBwYXJzZUludChldmVudC5vcmlnaW5hbEV2ZW50LndoZWVsRGVsdGEgfHwgLWV2ZW50Lm9yaWdpbmFsRXZlbnQuZGV0YWlsKTtcclxuICAgICAgICAgICAgaWYoY2FuU2Nyb2xsKXtcclxuICAgICAgICAgICAgICAgIGNhblNjcm9sbCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYW5TY3JvbGwgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSwgb3B0aW9ucy5zY3JvbGxTcGVlZCArIDEwMCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGVsdGEgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZVNjcmVlbi0tO1xyXG4gICAgICAgICAgICAgICAgICAgIGdvVG9TZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZVNjcmVlbisrO1xyXG4gICAgICAgICAgICAgICAgICAgIGdvVG9TZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLUtFWS1CT0FSRC1CSU5ELUVWRU5UUy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAgICAgJChkb2N1bWVudCkua2V5ZG93bihmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgaWYoY2FuU2Nyb2xsKXtcclxuICAgICAgICAgICAgICAgIGNhblNjcm9sbCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYW5TY3JvbGwgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSwgb3B0aW9ucy5zY3JvbGxTcGVlZCArIDEwMCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09IDM3IHx8IGUua2V5Q29kZSA9PSAzOCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZVNjcmVlbi0tO1xyXG4gICAgICAgICAgICAgICAgICAgIGdvVG9TZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAzOSB8fCBlLmtleUNvZGUgPT0gNDApIHtcclxuICAgICAgICAgICAgICAgICAgICBhY3RpdmVTY3JlZW4rKztcclxuICAgICAgICAgICAgICAgICAgICBnb1RvU2VjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tQ09OVFJPTFMtQklORElORy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcblxyXG4gICAgICAgICQoJyMnKyR0aGlzKS5vbignY2xpY2snLCdbZGF0YS1zZWN0aW9uXScsZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYWN0aXZlU2NyZWVuKTtcclxuICAgICAgICAgICAgaWYoY2FuU2Nyb2xsKSB7XHJcbiAgICAgICAgICAgICAgICBjYW5TY3JvbGwgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhblNjcm9sbCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9LCBvcHRpb25zLnNjcm9sbFNwZWVkICsgMTAwKTtcclxuICAgICAgICAgICAgICAgICAgICBhY3RpdmVTY3JlZW4gPSAkKHRoaXMpLmF0dHIoJ2RhdGEtc2VjdGlvbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGdvVG9TZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJCgnIycrJHRoaXMpLm9uKCdjbGljaycsJy5zY3JvbGxUb1NlY3Rpb24tQ29udHJvbCcsZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgaWYoY2FuU2Nyb2xsKSB7XHJcbiAgICAgICAgICAgICAgICBjYW5TY3JvbGwgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhblNjcm9sbCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9LCBvcHRpb25zLnNjcm9sbFNwZWVkICsgMTAwKTtcclxuICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmF0dHIoJ2RhdGEtY29udHJvbCcpIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZVNjcmVlbi0tO1xyXG4gICAgICAgICAgICAgICAgICAgIGdvVG9TZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBhY3RpdmVTY3JlZW4rKztcclxuICAgICAgICAgICAgICAgICAgICBnb1RvU2VjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB2YXIgdHM7XHJcblxyXG4gICAgICAgICQod2luZG93KS5iaW5kKCd0b3VjaG1vdmUnLCBmdW5jdGlvbiAoZSl7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKHdpbmRvdykuYmluZCgndG91Y2hzdGFydCcsIGZ1bmN0aW9uIChlKXtcclxuICAgICAgICAgICAgdHMgPSBlLm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXS5jbGllbnRZO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKHdpbmRvdykuYmluZCgndG91Y2hlbmQnLCBmdW5jdGlvbiAoZSl7XHJcbiAgICAgICAgICAgIHZhciB0ZSA9IGUub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRZO1xyXG4gICAgICAgICAgICBpZihjYW5TY3JvbGwpIHtcclxuICAgICAgICAgICAgICAgIGNhblNjcm9sbCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FuU2Nyb2xsID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0sIG9wdGlvbnMuc2Nyb2xsU3BlZWQgKyAxMDApO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRzID4gdGUgKyA1KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlU2NyZWVuKys7XHJcbiAgICAgICAgICAgICAgICAgICAgZ29Ub1NlY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHMgPCB0ZSAtIDUpIHtcclxuICAgICAgICAgICAgICAgICAgICBhY3RpdmVTY3JlZW4tLTtcclxuICAgICAgICAgICAgICAgICAgICBnb1RvU2VjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG5cclxuICAgIH07XHJcbiAgICByZXR1cm4gdGhpcztcclxufSkoalF1ZXJ5KTsiXX0=
